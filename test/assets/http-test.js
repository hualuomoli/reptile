const cheerio = require('cheerio')

const http    = require('../../assets/http')


const url = 'http://www.baidu.com/'
const cookie = 'BAIDUID=0410C01041C60472B25E41B37531B3B4:FG=1; BIDUPSID=0410C01041C60472B25E41B37531B3B4; PSTM=1561864532; BD_UPN=123253; MCITY=-%3A; __yjs_duid=1_b2375f4f4507db788f6cac04d4685d121611557623999; BDORZ=B490B5EBF6F3CD402E515D22BCDA1598; H_PS_PSSID=33423_33430_33273_33594_33463_26350_33265; BDSFRCVID=RGIOJeC629ZwD07eyC4mtSDNheKKLgbTH6aoDWKFEyViNL6UZH15EG0PqM8g0Ku-hILjogKKymOTHrAF_2uxOjjg8UtVJeC6EG0Ptf8g0M5; H_BDCLCKID_SF=tb4HoCKKtKI3H48k-4QEbbQH-UnLqhovBgOZ04n-ah05SlkRj4oBWMA45bbRWtv-W20j0h7m3UTdfh76Wh35K5tTQP6rLf6Ntmn4KKJxbp5FSJOGLt5N-f-FhUJiB5OMBan7_qvIXKohJh7FM4tW3J0ZyxomtfQxtNRJ0DnjtpChbC8xD6Lhj6J-epJf-K6H2CoX3RI8Kb7VKROkeURs5M4pbq7H2M-eQe0eQJ5XyPTDfMOeX478KM_O3ljn0pcr3C3Nox8b2pCbJhbJ3xTCDf0kQN3T-P5la5QH5bopKl3NDn3oyT3JXp0nj4Rly5jtMgOBBJ0yQ4b4OR5JjxonDh83bG7MJUutfJAjoDDaJD8BbnoRq45HMt00qxby26nEanR9aJ5y-J7nhUQoDTjq2qvQhhOg0U635m3ion3vQpbZ8-bO5p7mKnOyX-JZWp5wLJ6RKl0MLPbp8x5n5fQDLt_1LfnMBMPj52OnaIQc3fAKftnOM46JehL3346-35543bRTLnLy5KJYMDFRDjD-jjQ0DNRf-b-XfR6eW-5EK6rjDnCrLPOmXUI8LNDHa4jPWDn904T9tI3MVpb8MM7J3lRbyRO7tfTMaaOB_It55Pj0OJov0RrhMxL1Db0OhTvMtg3C3q0KaCToepvo2tcc3MkXLtjdJJQOBKQB0KnGbUQkeq8CQft20b0EeMtjKjLEJbPO_II5JIvbfP0kMRosbDCShGRN0Mc9WDTm_D_Xyt3UhK3N2f-MhJ09Q-T3KxniBIva-pPKKR7USpvDQJr4MfCTjRozBT_t3mkjbPjzfn02OPKzMMrdM44syPR82xRnWTrCKfA-b4ncjRcTehoM3xI8LNj405OTbIFO0KJzJCcjqR8ZDj_aej3P; BDSFRCVID_BFESS=RGIOJeC629ZwD07eyC4mtSDNheKKLgbTH6aoDWKFEyViNL6UZH15EG0PqM8g0Ku-hILjogKKymOTHrAF_2uxOjjg8UtVJeC6EG0Ptf8g0M5; H_BDCLCKID_SF_BFESS=tb4HoCKKtKI3H48k-4QEbbQH-UnLqhovBgOZ04n-ah05SlkRj4oBWMA45bbRWtv-W20j0h7m3UTdfh76Wh35K5tTQP6rLf6Ntmn4KKJxbp5FSJOGLt5N-f-FhUJiB5OMBan7_qvIXKohJh7FM4tW3J0ZyxomtfQxtNRJ0DnjtpChbC8xD6Lhj6J-epJf-K6H2CoX3RI8Kb7VKROkeURs5M4pbq7H2M-eQe0eQJ5XyPTDfMOeX478KM_O3ljn0pcr3C3Nox8b2pCbJhbJ3xTCDf0kQN3T-P5la5QH5bopKl3NDn3oyT3JXp0nj4Rly5jtMgOBBJ0yQ4b4OR5JjxonDh83bG7MJUutfJAjoDDaJD8BbnoRq45HMt00qxby26nEanR9aJ5y-J7nhUQoDTjq2qvQhhOg0U635m3ion3vQpbZ8-bO5p7mKnOyX-JZWp5wLJ6RKl0MLPbp8x5n5fQDLt_1LfnMBMPj52OnaIQc3fAKftnOM46JehL3346-35543bRTLnLy5KJYMDFRDjD-jjQ0DNRf-b-XfR6eW-5EK6rjDnCrLPOmXUI8LNDHa4jPWDn904T9tI3MVpb8MM7J3lRbyRO7tfTMaaOB_It55Pj0OJov0RrhMxL1Db0OhTvMtg3C3q0KaCToepvo2tcc3MkXLtjdJJQOBKQB0KnGbUQkeq8CQft20b0EeMtjKjLEJbPO_II5JIvbfP0kMRosbDCShGRN0Mc9WDTm_D_Xyt3UhK3N2f-MhJ09Q-T3KxniBIva-pPKKR7USpvDQJr4MfCTjRozBT_t3mkjbPjzfn02OPKzMMrdM44syPR82xRnWTrCKfA-b4ncjRcTehoM3xI8LNj405OTbIFO0KJzJCcjqR8ZDj_aej3P; delPer=0; BD_CK_SAM=1; PSINO=2; BD_HOME=1; ZD_ENTRY=baidu; BAIDUID_BFESS=0410C01041C60472B25E41B37531B3B4:FG=1; ab_sr=1.0.0_OWI1MjhiOTVmZWU1ZmRlYzQ2ZDNlNTJhMmVjMDJkOGU2MzE0YWQwMWQ3Njc2YjhhMWVmNjIzN2VkMDMzYTdjOWEyMWIxYzZlMGNjY2MyMDYxNjdiMTI2MDc2NmQ1ZTc5; H_PS_645EC=8d2fMQ%2BgohAAxMTcM4tyJ%2BRUmNY2GYHg7Xxuh0aG5DWBaVr62iQMXcE6qBA; BDUSS=kxN3BGeEx4YnhYfjN4Vm1XOEFYOElpYWhMT3p2b1pHUGI0VVktbEZHMWJtMEZnRVFBQUFBJCQAAAAAAAAAAAEAAAAZ9rQiu6jC5MSqzHkAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFsOGmBbDhpgM1; BDUSS_BFESS=kxN3BGeEx4YnhYfjN4Vm1XOEFYOElpYWhMT3p2b1pHUGI0VVktbEZHMWJtMEZnRVFBQUFBJCQAAAAAAAAAAAEAAAAZ9rQiu6jC5MSqzHkAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFsOGmBbDhpgM1; sug=3; sugstore=1; ORIGIN=0; bdime=0; BA_HECTOR=2125aka02ga58g251c1g1k3iu0r'

const run = async() => {

  // 使用cookie
  http.init(cookie) & await http.get(url).then(cheerio.load).then($ => $('#head span.user-name').html()).then(username => console.log(`使用cookie, 登陆用户 ${username}`))

  // 不适用cookie
  http.init('    ') & await http.get(url).then(cheerio.load).then($ => $('#head span.user-name').html()).then(username => console.log(`不使用cookie, 登陆用户 ${username}`))
  
  // 设置超时时间
  http.init(cookie) & await http.get(url, {timeout: 1}).catch(err => console.log(`使用cookie, 设置请求超时时间, 错误信息 ${err}`))

}


run()